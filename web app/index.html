<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Formar 2 equipos (5 vs 5)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root {
      --dark-bg: #0f172a;
      --dark-accent: #1f2937;
      --light-bg: #f8fafc;
      --light-card: #ffffff;
      --accent: #6366f1;
      --radius: 14px;
      --shadow: 0 10px 25px rgba(15,23,42,.15);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #e2e8f0 0, #cbd5f5 40%, #e2e8f0 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      padding: 1.5rem;
    }
    header {
      text-align: center;
    }
    h1 {
      font-size: clamp(1.4rem, 2vw, 1.9rem);
      margin-bottom: .25rem;
    }
    .wrapper {
      display: grid;
      gap: 1.5rem;
      grid-template-columns: minmax(280px, 360px) minmax(300px, 1fr);
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }
    .panel {
      background: rgba(248, 250, 252, 0.75);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,.4);
      border-radius: 1rem;
      box-shadow: var(--shadow);
      padding: 1rem 1.25rem 1.25rem;
    }
    .panel h2 {
      font-size: 1.05rem;
      margin-top: 0;
      display: flex;
      align-items: center;
      gap: .4rem;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: .85rem;
    }
    th, td {
      padding: .35rem .4rem;
      text-align: left;
    }
    th {
      font-weight: 600;
      font-size: .7rem;
      text-transform: uppercase;
      letter-spacing: .03em;
      border-bottom: 1px solid rgba(15,23,42,.1);
    }
    input[type="text"], input[type="number"] {
      width: 100%;
      border: 1px solid rgba(15,23,42,.1);
      border-radius: .4rem;
      padding: .25rem .35rem;
      font-size: .75rem;
      background: #fff;
    }
    input[type="number"] {
      max-width: 4.2rem;
    }
    button {
      background: var(--accent);
      color: #fff;
      border: none;
      margin-top: .65rem;
      padding: .55rem .8rem;
      border-radius: .55rem;
      font-weight: 600;
      cursor: pointer;
      font-size: .8rem;
      transition: transform .1s ease-out;
    }
    button:active {
      transform: translateY(1px);
    }
    .teams {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 1rem;
    }
    .team {
      border-radius: 1rem;
      padding: .75rem;
      min-height: 280px;
      display: flex;
      flex-direction: column;
      gap: .5rem;
    }
    .team.dark {
      background: radial-gradient(circle at top, #0f172a 0, #020617 90%);
      color: #e2e8f0;
    }
    .team.light {
      background: #f8fafc;
      border: 1px solid rgba(15,23,42,.05);
    }
    .team-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .team-title {
      font-weight: 700;
      letter-spacing: .04em;
      font-size: .9rem;
      text-transform: uppercase;
    }
    .team-score {
      font-size: .7rem;
      opacity: .85;
    }
    .cards {
      display: grid;
      gap: .5rem;
    }
    .card {
      display: flex;
      align-items: center;
      gap: .6rem;
      border-radius: .75rem;
      padding: .45rem .55rem;
      background: rgba(248,250,252,.15);
      backdrop-filter: blur(6px);
      border: 1px solid rgba(248,250,252,.18);
    }
    .team.light .card {
      background: #fff;
      border: 1px solid rgba(15,23,42,.04);
    }
    .rating {
      min-width: 2.6rem;
      height: 2.6rem;
      border-radius: .75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1rem;
    }
    .team.dark .rating {
      background: rgba(99, 102, 241, .4);
    }
    .team.light .rating {
      background: rgba(99, 102, 241, .08);
    }
    .player-meta {
      display: flex;
      flex-direction: column;
      gap: .05rem;
    }
    .player-name {
      font-weight: 600;
      font-size: .83rem;
    }
    .player-pos {
      font-size: .68rem;
      opacity: .7;
    }
    .pos-input {
      width: 3.2rem;
    }
    @media (max-width: 900px) {
      .wrapper {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Armador de equipos 5 vs 5 (estilo cartas FIFA)</h1>
    <p>Ingresá 10 jugadores con su puntaje 1–100 y generá dos equipos: camiseta oscura vs camiseta clara.</p>
  </header>

  <main class="wrapper">
    <!-- Panel de entrada -->
    <section class="panel">
      <h2>Jugadores (10)</h2>
      <p style="font-size:.75rem;margin-top:0;">Podés cambiar los nombres y los puntajes. Después apretá “Generar equipos”.</p>
      <table id="players-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Nombre</th>
            <th>Puntaje</th>
            <th>Pos.</th>
          </tr>
        </thead>
        <tbody>
          <!-- Cargamos 10 por defecto -->
        </tbody>
      </table>
      <button id="generate-btn">Generar equipos</button>
    </section>

    <!-- Panel de resultados -->
    <section class="panel">
      <h2>Resultado</h2>
      <div class="teams" id="teams-container">
        <!-- Se llena por JS -->
      </div>
    </section>
  </main>

  <script>
    // Datos base
    const defaultPlayers = [
      { name: "Messi", rating: 95, pos: "DEL" },
      { name: "Cristiano", rating: 93, pos: "DEL" },
      { name: "De Bruyne", rating: 91, pos: "MC" },
      { name: "Mbappé", rating: 92, pos: "DEL" },
      { name: "Van Dijk", rating: 90, pos: "DFC" },
      { name: "Modric", rating: 89, pos: "MC" },
      { name: "Haaland", rating: 91, pos: "DEL" },
      { name: "Alisson", rating: 88, pos: "ARQ" },
      { name: "Rodri", rating: 90, pos: "MC" },
      { name: "Valverde", rating: 86, pos: "MC" },
    ];

    const tbody = document.querySelector("#players-table tbody");
    function renderTable(players) {
      tbody.innerHTML = "";
      players.forEach((p, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${i + 1}</td>
          <td><input type="text" value="${p.name}" data-field="name" data-idx="${i}"></td>
          <td><input type="number" min="1" max="100" value="${p.rating}" data-field="rating" data-idx="${i}"></td>
          <td><input class="pos-input" type="text" value="${p.pos}" data-field="pos" data-idx="${i}"></td>
        `;
        tbody.appendChild(tr);
      });
    }
    renderTable(defaultPlayers);

    // Leer jugadores actuales desde la tabla
    function getPlayersFromTable() {
      const rows = tbody.querySelectorAll("tr");
      const players = [];
      rows.forEach((row, idx) => {
        const name = row.querySelector('input[data-field="name"]').value.trim() || "Jugador " + (idx + 1);
        const rating = parseInt(row.querySelector('input[data-field="rating"]').value, 10) || 1;
        const pos = row.querySelector('input[data-field="pos"]').value.trim() || "-";
        players.push({ name, rating, pos });
      });
      return players;
    }

    // Algoritmo: ordenamos por rating desc y hacemos draft 1,2,2,1,1,2,2,1,1,2
    function splitIntoTeams(players) {
      const sorted = [...players].sort((a, b) => b.rating - a.rating);

      const teamDark = [];
      const teamLight = [];

      // patrón de reparto para 10 jugadores
      const pattern = ["dark", "light", "light", "dark", "dark", "light", "light", "dark", "dark", "light"];

      sorted.forEach((player, idx) => {
        const target = pattern[idx];
        if (target === "dark") {
          teamDark.push(player);
        } else {
          teamLight.push(player);
        }
      });

      return { teamDark, teamLight };
    }

    function teamTotal(team) {
      return team.reduce((sum, p) => sum + p.rating, 0);
    }

    function renderTeams({ teamDark, teamLight }) {
      const container = document.getElementById("teams-container");
      container.innerHTML = "";

      const darkTotal = teamTotal(teamDark);
      const lightTotal = teamTotal(teamLight);

      const darkEl = document.createElement("div");
      darkEl.className = "team dark";
      darkEl.innerHTML = `
        <div class="team-header">
          <div class="team-title">Camiseta oscura</div>
          <div class="team-score">Total: ${darkTotal}</div>
        </div>
        <div class="cards">
          ${teamDark.map(p => `
            <div class="card">
              <div class="rating">${p.rating}</div>
              <div class="player-meta">
                <span class="player-name">${p.name}</span>
                <span class="player-pos">${p.pos}</span>
              </div>
            </div>
          `).join("")}
        </div>
      `;
      container.appendChild(darkEl);

      const lightEl = document.createElement("div");
      lightEl.className = "team light";
      lightEl.innerHTML = `
        <div class="team-header">
          <div class="team-title">Camiseta clara</div>
          <div class="team-score">Total: ${lightTotal}</div>
        </div>
        <div class="cards">
          ${teamLight.map(p => `
            <div class="card">
              <div class="rating">${p.rating}</div>
              <div class="player-meta">
                <span class="player-name">${p.name}</span>
                <span class="player-pos">${p.pos}</span>
              </div>
            </div>
          `).join("")}
        </div>
      `;
      container.appendChild(lightEl);
    }

    // Primera renderización
    const initialTeams = splitIntoTeams(defaultPlayers);
    renderTeams(initialTeams);

    // Handler de botón
    document.getElementById("generate-btn").addEventListener("click", () => {
      const players = getPlayersFromTable();
      if (players.length !== 10) {
        alert("Tienen que ser exactamente 10 jugadores.");
        return;
      }
      const teams = splitIntoTeams(players);
      renderTeams(teams);
    });
  </script>
</body>
</html>
